# -*- coding: utf-8 -*-
# flake8: noqa
"""
Created on Fri Nov 29 14:44:03 2024
@author: FIDE Handbook B.02. FIDE Rating Regulations (Qualification Commission) 
"""
# Tables from FIDE Handbook

# fmt: off
ScoreToDp = [-800,
          -677,-589,-538,-501,-470,-444,-422,-401,-383,-366,
          -351,-336,-322,-309,-296,-284,-273,-262,-251,-240,
          -230,-220,-211,-202,-193,-184,-175,-166,-158,-149,
          -141,-133,-125,-117,-110,-102, -95, -87, -80, -72,
           -65, -57, -50, -43, -36, -29, -21, -14,  -7,   0,
             7,  14,  21,  29,  36,  43,  50,  57,  65,  72,
            80,  87,  95, 102, 110, 117, 125, 133, 141, 149,
           158, 166, 175, 184, 193, 202, 211, 220, 230, 240,
           251, 262, 273, 284, 296, 309, 322, 336, 351, 366,
           383, 401, 422, 444, 470, 501, 538, 589, 677, 800,
        ];
DiffToPd = [50,                                     # 0
            50,  50,  50,  51,  51,  51,  51,  51,  51,  51,
            52,  52,  52,  52,  52,  52,  52,  53,  53,  53,
            53,  53,  53,  53,  53,  54,  54,  54,  54,  54,
            54,  54,  55,  55,  55,  55,  55,  55,  55,  56,
            56,  56,  56,  56,  56,  56,  57,  57,  57,  57,
            57,  57,  57,  58,  58,  58,  58,  58,  58,  58,
            58,  59,  59,  59,  59,  59,  59,  59,  60,  60,
            60,  60,  60,  60,  60,  60,  61,  61,  61,  61,
            61,  61,  61,  62,  62,  62,  62,  62,  62,  62,
            62,  63,  63,  63,  63,  63,  63,  63,  64,  64,  # 100
            64,  64,  64,  64,  64,  64,  65,  65,  65,  65,
            65,  65,  65,  66,  66,  66,  66,  66,  66,  66,
            66,  67,  67,  67,  67,  67,  67,  67,  67,  68,
            68,  68,  68,  68,  68,  68,  68,  69,  69,  69,
            69,  69,  69,  69,  69,  70,  70,  70,  70,  70,
            70,  70,  70,  71,  71,  71,  71,  71,  71,  71,
            71,  71,  72,  72,  72,  72,  72,  72,  72,  72,
            73,  73,  73,  73,  73,  73,  73,  73,  73,  74,
            74,  74,  74,  74,  74,  74,  74,  74,  75,  75,
            75,  75,  75,  75,  75,  75,  75,  76,  76,  76,  # 200
            76,  76,  76,  76,  76,  76,  77,  77,  77,  77,
            77,  77,  77,  77,  77,  78,  78,  78,  78,  78,
            78,  78,  78,  78,  78,  79,  79,  79,  79,  79,
            79,  79,  79,  79,  79,  80,  80,  80,  80,  80,
            80,  80,  80,  80,  80,  81,  81,  81,  81,  81,
            81,  81,  81,  81,  81,  81,  82,  82,  82,  82,
            82,  82,  82,  82,  82,  82,  82,  83,  83,  83,
            83,  83,  83,  83,  83,  83,  83,  83,  84,  84,
            84,  84,  84,  84,  84,  84,  84,  84,  84,  84,
            85,  85,  85,  85,  85,  85,  85,  85,  85,  85,  # 300
            85,  85,  86,  86,  86,  86,  86,  86,  86,  86,
            86,  86,  86,  86,  86,  87,  87,  87,  87,  87,
            87,  87,  87,  87,  87,  87,  87,  87,  88,  88,
            88,  88,  88,  88,  88,  88,  88,  88,  88,  88,
            88,  88,  88,  88,  89,  89,  89,  89,  89,  89,
            89,  89,  89,  89,  89,  89,  89,  90,  90,  90,
            90,  90,  90,  90,  90,  90,  90,  90,  90,  90,
            90,  90,  90,  90,  91,  91,  91,  91,  91,  91,
            91,  91,  91,  91,  91,  91,  91,  91,  91,  91,
            91,  92,  92,  92,  92,  92,  92,  92,  92,  92,  # 400
            92,  92,  92,  92,  92,  92,  92,  92,  92,  92,
            92,  93,  93,  93,  93,  93,  93,  93,  93,  93,
            93,  93,  93,  93,  93,  93,  93,  93,  93,  93,
            93,  93,  94,  94,  94,  94,  94,  94,  94,  94,
            94,  94,  94,  94,  94,  94,  94,  94,  94,  94,
            94,  94,  94,  94,  94,  94,  95,  95,  95,  95,
            95,  95,  95,  95,  95,  95,  95,  95,  95,  95,
            95,  95,  95,  95,  95,  95,  95,  95,  95,  95,
            95,  95,  95,  95,  96,  96,  96,  96,  96,  96,
            96,  96,  96,  96,  96,  96,  96,  96,  96,  96,  # 500
            96,  96,  96,  96,  96,  96,  96,  96,  96,  96,
            96,  96,  96,  96,  96,  96,  96,  97,  97,  97,
            97,  97,  97,  97,  97,  97,  97,  97,  97,  97,
            97,  97,  97,  97,  97,  97,  97,  97,  97,  97,
            97,  97,  97,  97,  97,  97,  97,  97,  97,  97,
            97,  97,  97,  97,  97,  97,  97,  97,  97,  98,
            98,  98,  98,  98,  98,  98,  98,  98,  98,  98,
            98,  98,  98,  98,  98,  98,  98,  98,  98,  98,
            98,  98,  98,  98,  98,  98,  98,  98,  98,  98,
            98,  98,  98,  98,  98,  98,  98,  98,  98,  98,  # 600
            98,  98,  98,  98,  98,  98,  98,  98,  98,  98,
            98,  98,  98,  98,  98,  98,  98,  98,  98,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,  # 700
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99,  99,  99,  99,  99,  99,
            99,  99,  99,  99,  99, 100, 100, 100, 100, 100,
           100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
           100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
           100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
           100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
           100, 100, 100, 100, 100, 100, 100, 100, 100, 100,
           100, 100, 100, 100, 100, 100, 100, 100, 100, 100,  # 800
        ]
# fmt: on


# run program
if __name__ == "__main__":

    def testScoreToDp():
        myScoreToDp = [0] * 101
        lines = HandbookScoreToDp.split("\n")
        tuplecounter = 0
        for line in lines:
            line = line.strip()
            if line == "":
                continue
            if tuplecounter == 0:
                index = int(round(float(line) * 100.0))
            elif tuplecounter == 1:
                value = int(line)
                myScoreToDp[index] = value
            tuplecounter = (tuplecounter + 1) % 2
        if myScoreToDp == ScoreToDp:
            print("ScoreToDp OK")
        else:
            print("ScoreToDp Err")
            for index in range(len(ScoreToDp)):
                if myScoreToDp[index] != ScoreToDp[index]:
                    print("Err pos", index, "tables:", ScoreToDp[index], "handbook:", myScoreToDp[index])

    def testDiffToPd():
        myDiffToPd = [0] * 801
        lines = HandbookDiffToPd.split("\n")
        tuplecounter = 0
        for line in lines:
            line = line.strip()
            if line == "":
                continue
            if tuplecounter == 0:
                values = line.split("-")
                if len(values) == 1 and line[0] == ">":
                    values = [int(line[2:]) + 1, 800]
                index = [int(val) + pos for pos, val in enumerate(values)]

            elif tuplecounter == 1:
                value = int(round(float(line) * 100.0))
            elif tuplecounter == 1:
                for i in range(index[0], index[1]):
                    myDiffToPd[i] = value
            tuplecounter = (tuplecounter + 1) % 3
        if myDiffToPd == DiffToPd:
            print("DiffToPd OK")
        else:
            print("DiffToPd Err")
            for index in range(len(DiffToPd)):
                if myDiffToPd[index] != DiffToPd[index]:
                    print("Err pos", index, "tables:", DiffToPd[index], "handbook:", myDiffToPd[index])

    # Cut and paste from FIDE handbook

    HandbookScoreToDp = """
    1.0
    800
    .83
    273
    .66
    117
    .49
    -7
    .32
     -133
    .15
    -296
    .99
    677
    .82
    262
    .65
    110
    .48
    -14
    .31
     -141
    .14
    -309
    .98
    589
    .81
    251
    .64
    102
    .47
    -21
    .30
     -149
    .13
    -322
    .97
    538
    .80
    240
    .63
    95
    .46
    -29
    .29
     -158
    .12
    -336
    .96
    501
    .79
    230
    .62
    87
    .45
    -36
    .28
     -166
    .11
    -351
    .95
    470
    .78
    220
    .61
    80
    .44
    -43
    .27
     -175
    .10
    -366
    .94
    444
    .77
    211
    .60
    72
    .43
    -50
    .26
     -184
    .09
    -383
    .93
    422
    .76
    202
    .59
    65
    .42
    -57
    .25
     -193
    .08
    -401
    .92
    401
    .75
    193
    .58
    57
    .41
    -65
    .24
     -202
    .07
    -422
    .91
    383
    .74
    184
    .57
    50
    .40
    -72
    .23
     -211
    .06
    -444
    .90
    366
    .73
    175
    .56
    43
    .39
    -80
    .22
     -220
    .05
    -470
    .89
    351
    .72
    166
    .55
    36
    .38
    -87
    .21
     -230
    .04
    -501
    .88
    336
    .71
    158
    .54
    29
    .37
    -95
    .20
     -240
    .03
    -538
    .87
    322
    .70
    149
    .53
    21
    .36
    -102
    .19
     -251
    .02
    -589
    .86
    309
    .69
    141
    .52
    14
    .35
    -110
    .18
     -262
    .01
    -677
    .85
    296
    .68
    133
    .51
    7
    .34
    -117
    .17
     -273
    .00
    -800
    .84
    284
    .67
    125
    .50
    0
    .33
    -125
    .16
     -284
    """

    HandbookDiffToPd = """
    0-3
    .50
    .50
    92-98
    .63
    .37
     198-206
    .76
    .24
    345-357
    .89
    .11
    4-10
    .51
    .49
    99-106
    .64
    .36
     207-215
    .77
    .23
    358-374
    .90
    .10
    11-17
    .52
    .48
    107-113
    .65
    .35
     216-225
    .78
    .22
    375-391
    .91
    .09
    18-25
    .53
    .47
    114-121
    .66
    .34
     226-235
    .79
    .21
    392-411
    .92
    .08
    26-32
    .54
    .46
    122-129
    .67
    .33
     236-245
    .80
    .20
    412-432
    .93
    .07
    33-39
    .55
    .45
    130-137
    .68
    .32
     246-256
    .81
    .19
    433-456
    .94
    .06
    40-46
    .56
    .44
    138-145
    .69
    .31
     257-267
    .82
    .18
    457-484
    .95
    .05
    47-53
    .57
    .43
    146-153
    .70
    .30
     268-278
    .83
    .17
    485-517
    .96
    .04
    54-61
    .58
    .42
    154-162
    .71
    .29
     279-290
    .84
    .16
    518-559
    .97
    .03
    62-68
    .59
    .41
    163-170
    .72
    .28
     291-302
    .85
    .15
    560-619
    .98
    .02
    69-76
    .60
    .40
    171-179
    .73
    .27
     303-315
    .86
    .14
    620-735
    .99
    .01
    77-83
    .61
    .39
    180-188
    .74
    .26
     316-328
    .87
    .13
    > 735
    1.0
    .00
    84-91
    .62
    .38
    189-197
    .75
    .25
     329-344
    .88
    .12
    """

    testDiffToPd()
    testScoreToDp()
